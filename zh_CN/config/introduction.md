# 配置

本节主要介绍如何在 ECP Edge 中添加南向设备、建立其与 ECP Edge 的通信，并通过北向插件将其连接到云平台或处理引擎泪的外部应用。

## 关键概念

### Plugin 插件

插件可以分为北向应用和南向驱动程序。北向插件通常用于连接到云平台或像处理引擎这样的外部应用程序。南向插件是实现特定协议以访问外部设备的通信驱动程序。为了实现协议格式转换，至少需要一个北向插件和一个南向插件分别用于数据传递和数据采集。

<!--所有插件模块都是用 C 语言编写，并为希望二次开发的用户提供了 SDK 文件。插件是由 SDK 构建的动态链接库(.so) 文件。具体的插件开发教程请参考 [SKD 教程](../../dev-guide/sdk-tutorial/sdk-tutorial.md)。-->

### Tag 点位

点位是分配给一条信息的非分层唯一关键字，其中定义了设备中的数据存储位置和数据操作属性，还包含有关数据的一些元数据信息，如缩放、精确度和读/写属性等。点位信息有助于描述项目，并允许在设备中找到该项目或对其进行处理以自动读取/写入。用户将识别设备中那些感兴趣的点位，以从设备中读取数据或向设备写入数据。

### Group 组

点位将被分配到组中。每个组都有独立的轮询频率以从设备中读取数据。设备中用户感兴趣的点位集合被分成几个组以便更好地管理。路由机制基于这些组作为信息单元在节点之间进行交换。北向节点可以订阅任何南向节点中的任何组。这些订阅将用于在节点之间路由数据消息。此外，还有一个组轮询频率用于控制设备轮询的时间间隔。

## 配置流程

以下为如何通过设置 ECP Edge 进行各种工业协议转换、进而完成数据传递和采集的工作流程。

1. [查看所有可用插件](./neuron_plugin.md)：使用各种工业插件可以实现 ECP Edge 数据采集和传递。

2. 创建一个南向驱动：在查看所有可用的插件后，根据工业协议为设备通信选择所有必需的南向插件。每个南向插件根据协议规范只有一个与设备或多个设备总线的连接。

3. 建立设备与 ECP Edge 之间的通信：首先为南向驱动程序添加组和点位。创建好组和点位，即可从数据监控中获取点位的实时值。

   :::tip

   重复步骤 2 和 3，直到创建了所有必要的驱动程序、组和点位。
   :::

<!--通常在 ECP Edge 中会有非常多的标签需要处理。为了避免在仪表板中一个一个地添加组和标签，这些组和标签可以在离线的 Excel 表格中准备好，然后导入到 ECP Edge 中。-->

4. 创建一个北向应用：选择需要的北向插件以实现数据的传送。每个北向插件只能连接到一个目的地，如代理或应用程序。

5. 创建订阅组：在此步骤中，不需要设置组和点位。相反，北向节点可以订阅在南向节点中创建的任何组。建立订阅后，相应组的数据将按照组的频率持续发布到北向节点。

整体流程如下图所示：

<img src="./_assets/config.png" alt="配置步骤" style="zoom:40%;" />
